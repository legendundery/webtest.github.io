{"version":3,"file":"js/3694.2a39154d.js","mappings":"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","sources":["webpack://webide/./src/views/CourseLearning/CreateNewCourse.vue?193c","webpack://webide/./src/views/CourseLearning/CreateNewCourse.vue","webpack://webide/./src/views/CourseLearning/CreateNewCourse.vue?531b"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = {\n  class: \"course-editor\",\n  style: {\"height\":\"100%\",\"overflow-y\":\"auto\"}\n}\nconst _hoisted_2 = { class: \"form-section\" }\nconst _hoisted_3 = { class: \"form-group\" }\nconst _hoisted_4 = { class: \"form-group\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"video-preview\"\n}\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = { class: \"form-section\" }\nconst _hoisted_8 = { class: \"form-group\" }\nconst _hoisted_9 = { class: \"chapter-header\" }\nconst _hoisted_10 = [\"onUpdate:modelValue\"]\nconst _hoisted_11 = [\"onClick\"]\nconst _hoisted_12 = { class: \"form-group\" }\nconst _hoisted_13 = [\"onUpdate:modelValue\"]\nconst _hoisted_14 = [\"onClick\"]\nconst _hoisted_15 = { class: \"section-header\" }\nconst _hoisted_16 = [\"onUpdate:modelValue\"]\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = { class: \"form-group\" }\nconst _hoisted_19 = [\"onClick\"]\nconst _hoisted_20 = { key: 0 }\nconst _hoisted_21 = { class: \"form-group\" }\nconst _hoisted_22 = [\"onChange\"]\nconst _hoisted_23 = { key: 0 }\nconst _hoisted_24 = {\n  key: 0,\n  class: \"code-files\"\n}\nconst _hoisted_25 = [\"onClick\"]\nconst _hoisted_26 = { class: \"form-section\" }\nconst _hoisted_27 = {\n  key: 0,\n  class: \"json-preview\"\n}\n\nimport { ref, computed, onMounted } from \"vue\";\n\n// 扩展数据结构以支持创建\ninterface CourseData {\n  title: string;\n  chapters: Chapter[];\n}\n\ninterface Chapter {\n  name: string;\n  sections: Section[];\n}\n\ninterface Section {\n  name: string;\n  timepoint?: number; // 可选时间点\n  videoPath?: string | null; // 修改为 string | null 与 videoUrl 类型一致\n  codeFiles: CodeFile[];\n}\n\ninterface CodeFile {\n  filename: string;\n  file: File;\n  fileUrl: string;\n  inputpath?: string; // 可选输入文件路径\n}\n\n// 状态定义\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CreateNewCourse',\n  setup(__props) {\n\nconst newCourse = ref<CourseData>({\n  title: \"\",\n  chapters: [],\n});\n\nconst newChapterName = ref(\"\");\nconst newSectionNames = ref<string[]>([]);\nconst videoUrl = ref<string | null>(null);\nconst videoRef = ref<HTMLVideoElement | null>(null);\nconst generatedJSON = ref<any>(null);\n\n// 处理视频上传\nconst handleVideoUpload = (e: Event) => {\n  const files = (e.target as HTMLInputElement).files;\n  if (!files || files.length === 0) return;\n\n  const file = files[0];\n  const url = URL.createObjectURL(file);\n  videoUrl.value = url;\n\n  // 设置所有章节的视频路径\n  newCourse.value.chapters.forEach((chapter) => {\n    chapter.sections.forEach((section) => {\n      section.videoPath = url;\n    });\n  });\n};\n\n// 添加章节\nconst addChapter = () => {\n  if (!newChapterName.value.trim()) return;\n\n  newCourse.value.chapters.push({\n    name: newChapterName.value,\n    sections: [],\n  });\n\n  newSectionNames.value.push(\"\");\n  newChapterName.value = \"\";\n};\n\n// 删除章节\nconst deleteChapter = (chapterIndex: number) => {\n  newCourse.value.chapters.splice(chapterIndex, 1);\n  newSectionNames.value.splice(chapterIndex, 1);\n};\n\n// 添加小节\nconst addSection = (chapterIndex: number) => {\n  if (!newSectionNames.value[chapterIndex].trim()) return;\n\n  newCourse.value.chapters[chapterIndex].sections.push({\n    name: newSectionNames.value[chapterIndex],\n    codeFiles: [],\n    videoPath: videoUrl.value, // 直接赋值，类型已匹配\n  });\n\n  newSectionNames.value[chapterIndex] = \"\";\n};\n\n// 删除小节\nconst deleteSection = (chapterIndex: number, sectionIndex: number) => {\n  newCourse.value.chapters[chapterIndex].sections.splice(sectionIndex, 1);\n};\n\n// 在当前视频时间点添加标记\nconst markTimepoint = (chapterIndex: number, sectionIndex: number) => {\n  if (!videoRef.value) return;\n\n  const timepoint = Math.floor(videoRef.value.currentTime);\n  newCourse.value.chapters[chapterIndex].sections[sectionIndex].timepoint =\n    timepoint;\n};\n\n// 处理代码文件上传\nconst handleCodeUpload = (\n  chapterIndex: number,\n  sectionIndex: number,\n  e: Event\n) => {\n  const files = (e.target as HTMLInputElement).files;\n  if (!files || files.length === 0) return;\n\n  const file = files[0];\n  const fileUrl = URL.createObjectURL(file);\n\n  newCourse.value.chapters[chapterIndex].sections[sectionIndex].codeFiles.push({\n    filename: file.name,\n    file,\n    fileUrl,\n  });\n};\n\n// 删除代码文件\nconst deleteCodeFile = (\n  chapterIndex: number,\n  sectionIndex: number,\n  fileIndex: number\n) => {\n  const file =\n    newCourse.value.chapters[chapterIndex].sections[sectionIndex].codeFiles[\n      fileIndex\n    ];\n  URL.revokeObjectURL(file.fileUrl); // 释放URL对象\n  newCourse.value.chapters[chapterIndex].sections[\n    sectionIndex\n  ].codeFiles.splice(fileIndex, 1);\n};\n\n// 生成JSON\nconst generateJSON = () => {\n  // 准备导出的JSON数据\n  const exportData: CourseData = {\n    title: newCourse.value.title,\n    chapters: newCourse.value.chapters.map((chapter, chapterIndex) => ({\n      name: chapter.name,\n      sections: chapter.sections.map((section, sectionIndex) => ({\n        name: section.name,\n        videoPath: section.videoPath || \"\",\n        codeFiles: section.codeFiles.map((file, fileIndex) => ({\n          // 包含所有必要的属性\n          ...file,\n          timepoint: section.timepoint || 0,\n          codepath: `/code/${file.filename}`,\n          inputpath: `/input/${file.filename.replace(\n            /\\.[^/.]+$/,\n            \"\"\n          )}_input.txt`,\n        })),\n      })),\n    })),\n  };\n\n  generatedJSON.value = exportData;\n};\n\n// 下载JSON文件\nconst downloadJSON = () => {\n  if (!generatedJSON.value) return;\n\n  const jsonStr = JSON.stringify(generatedJSON.value, null, 2);\n  const blob = new Blob([jsonStr], { type: \"application/json\" });\n\n  // 创建下载链接\n  const link = document.createElement(\"a\");\n  link.href = URL.createObjectURL(blob);\n  link.download = `${newCourse.value.title || \"course\"}.json`;\n\n  // 触发下载\n  document.body.appendChild(link);\n  link.click();\n\n  // 清理\n  document.body.removeChild(link);\n  URL.revokeObjectURL(link.href);\n};\n\n// 时间格式化函数\nconst formatTime = (timepoint: number) => {\n  const minutes = Math.floor(timepoint / 60);\n  const seconds = Math.floor(timepoint % 60);\n  return `${minutes.toString().padStart(2, \"0\")}:${seconds\n    .toString()\n    .padStart(2, \"0\")}`;\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[13] || (_cache[13] = _createElementVNode(\"h1\", null, \"创建新课程\", -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"课程基本信息\", -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _cache[2] || (_cache[2] = _createElementVNode(\"label\", null, \"课程标题:\", -1)),\n        _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((newCourse.value.title) = $event)),\n          placeholder: \"输入课程标题\"\n        }, null, 512), [\n          [_vModelText, newCourse.value.title]\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _cache[4] || (_cache[4] = _createElementVNode(\"label\", null, \"上传课程视频:\", -1)),\n        _createElementVNode(\"input\", {\n          type: \"file\",\n          onChange: handleVideoUpload\n        }, null, 32),\n        (videoUrl.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n              _createElementVNode(\"video\", {\n                ref_key: \"videoRef\",\n                ref: videoRef,\n                controls: \"\",\n                width: \"640\",\n                height: \"360\"\n              }, [\n                _createElementVNode(\"source\", {\n                  src: videoUrl.value,\n                  type: \"video/mp4\"\n                }, null, 8, _hoisted_6),\n                _cache[3] || (_cache[3] = _createTextVNode(\" 您的浏览器不支持视频播放 \"))\n              ], 512)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"课程结构\", -1)),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"章节名称:\", -1)),\n        _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((newChapterName).value = $event)),\n          placeholder: \"输入章节名称\"\n        }, null, 512), [\n          [_vModelText, newChapterName.value]\n        ]),\n        _createElementVNode(\"button\", { onClick: addChapter }, \"添加章节\")\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(newCourse.value.chapters, (chapter, chapterIndex) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: chapterIndex,\n          class: \"chapter-item\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_9, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": ($event: any) => ((chapter.name) = $event),\n              placeholder: \"章节名称\"\n            }, null, 8, _hoisted_10), [\n              [_vModelText, chapter.name]\n            ]),\n            _createElementVNode(\"button\", {\n              onClick: ($event: any) => (deleteChapter(chapterIndex))\n            }, \"删除\", 8, _hoisted_11)\n          ]),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"小节名称:\", -1)),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": ($event: any) => ((newSectionNames.value[chapterIndex]) = $event),\n              placeholder: \"输入小节名称\"\n            }, null, 8, _hoisted_13), [\n              [_vModelText, newSectionNames.value[chapterIndex]]\n            ]),\n            _createElementVNode(\"button\", {\n              onClick: ($event: any) => (addSection(chapterIndex))\n            }, \"添加小节\", 8, _hoisted_14)\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(chapter.sections, (section, sectionIndex) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: sectionIndex,\n              class: \"section-item\"\n            }, [\n              _createElementVNode(\"div\", _hoisted_15, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  \"onUpdate:modelValue\": ($event: any) => ((section.name) = $event),\n                  placeholder: \"小节名称\"\n                }, null, 8, _hoisted_16), [\n                  [_vModelText, section.name]\n                ]),\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (deleteSection(chapterIndex, sectionIndex))\n                }, \" 删除 \", 8, _hoisted_17)\n              ]),\n              _createElementVNode(\"div\", _hoisted_18, [\n                _cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"时间点标记:\", -1)),\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (markTimepoint(chapterIndex, sectionIndex))\n                }, \" 在当前时间添加标记 \", 8, _hoisted_19),\n                (section.timepoint)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \"当前标记: \" + _toDisplayString(formatTime(section.timepoint)), 1))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_21, [\n                _cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"代码文件:\", -1)),\n                _createElementVNode(\"input\", {\n                  type: \"file\",\n                  onChange: ($event: any) => (handleCodeUpload(chapterIndex, sectionIndex, $event))\n                }, null, 40, _hoisted_22),\n                (section.codeFiles.length)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_23, \"已上传 \" + _toDisplayString(section.codeFiles.length) + \" 个文件\", 1))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              (section.codeFiles.length)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                    _cache[10] || (_cache[10] = _createElementVNode(\"h4\", null, \"代码文件列表:\", -1)),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(section.codeFiles, (file, fileIndex) => {\n                      return (_openBlock(), _createElementBlock(\"div\", {\n                        key: fileIndex,\n                        class: \"code-file-item\"\n                      }, [\n                        _createElementVNode(\"span\", null, _toDisplayString(file.filename), 1),\n                        _createElementVNode(\"button\", {\n                          onClick: ($event: any) => (deleteCodeFile(chapterIndex, sectionIndex, fileIndex))\n                        }, \" 删除 \", 8, _hoisted_25)\n                      ]))\n                    }), 128))\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]))\n          }), 128))\n        ]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_26, [\n      _createElementVNode(\"button\", { onClick: generateJSON }, \"生成JSON\"),\n      (generatedJSON.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n            _cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"生成的JSON:\", -1)),\n            _createElementVNode(\"pre\", null, _toDisplayString(JSON.stringify(generatedJSON.value, null, 2)), 1),\n            _createElementVNode(\"button\", { onClick: downloadJSON }, \"下载JSON\")\n          ]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"course-editor\" style=\"height: 100%; overflow-y: auto\">\n    <h1>创建新课程</h1>\n\n    <!-- 基本信息表单 -->\n    <div class=\"form-section\">\n      <h2>课程基本信息</h2>\n      <div class=\"form-group\">\n        <label>课程标题:</label>\n        <input v-model=\"newCourse.title\" placeholder=\"输入课程标题\" />\n      </div>\n\n      <!-- 视频上传区域 -->\n      <div class=\"form-group\">\n        <label>上传课程视频:</label>\n        <input type=\"file\" @change=\"handleVideoUpload\" />\n        <div v-if=\"videoUrl\" class=\"video-preview\">\n          <video ref=\"videoRef\" controls width=\"640\" height=\"360\">\n            <source :src=\"videoUrl\" type=\"video/mp4\" />\n            您的浏览器不支持视频播放\n          </video>\n        </div>\n      </div>\n    </div>\n\n    <!-- 章节和小节管理 -->\n    <div class=\"form-section\">\n      <h2>课程结构</h2>\n\n      <!-- 添加章节 -->\n      <div class=\"form-group\">\n        <label>章节名称:</label>\n        <input v-model=\"newChapterName\" placeholder=\"输入章节名称\" />\n        <button @click=\"addChapter\">添加章节</button>\n      </div>\n\n      <!-- 章节列表 -->\n      <div\n        v-for=\"(chapter, chapterIndex) in newCourse.chapters\"\n        :key=\"chapterIndex\"\n        class=\"chapter-item\"\n      >\n        <div class=\"chapter-header\">\n          <input v-model=\"chapter.name\" placeholder=\"章节名称\" />\n          <button @click=\"deleteChapter(chapterIndex)\">删除</button>\n        </div>\n\n        <!-- 添加小节 -->\n        <div class=\"form-group\">\n          <label>小节名称:</label>\n          <input\n            v-model=\"newSectionNames[chapterIndex]\"\n            placeholder=\"输入小节名称\"\n          />\n          <button @click=\"addSection(chapterIndex)\">添加小节</button>\n        </div>\n\n        <!-- 小节列表 -->\n        <div\n          v-for=\"(section, sectionIndex) in chapter.sections\"\n          :key=\"sectionIndex\"\n          class=\"section-item\"\n        >\n          <div class=\"section-header\">\n            <input v-model=\"section.name\" placeholder=\"小节名称\" />\n            <button @click=\"deleteSection(chapterIndex, sectionIndex)\">\n              删除\n            </button>\n          </div>\n\n          <!-- 视频时间点标记 -->\n          <div class=\"form-group\">\n            <label>时间点标记:</label>\n            <button @click=\"markTimepoint(chapterIndex, sectionIndex)\">\n              在当前时间添加标记\n            </button>\n            <span v-if=\"section.timepoint\"\n              >当前标记: {{ formatTime(section.timepoint) }}</span\n            >\n          </div>\n\n          <!-- 代码文件上传 -->\n          <div class=\"form-group\">\n            <label>代码文件:</label>\n            <input\n              type=\"file\"\n              @change=\"handleCodeUpload(chapterIndex, sectionIndex, $event)\"\n            />\n            <span v-if=\"section.codeFiles.length\"\n              >已上传 {{ section.codeFiles.length }} 个文件</span\n            >\n          </div>\n\n          <!-- 代码文件列表 -->\n          <div v-if=\"section.codeFiles.length\" class=\"code-files\">\n            <h4>代码文件列表:</h4>\n            <div\n              v-for=\"(file, fileIndex) in section.codeFiles\"\n              :key=\"fileIndex\"\n              class=\"code-file-item\"\n            >\n              <span>{{ file.filename }}</span>\n              <button\n                @click=\"deleteCodeFile(chapterIndex, sectionIndex, fileIndex)\"\n              >\n                删除\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 生成JSON -->\n    <div class=\"form-section\">\n      <button @click=\"generateJSON\">生成JSON</button>\n      <div v-if=\"generatedJSON\" class=\"json-preview\">\n        <h3>生成的JSON:</h3>\n        <pre>{{ JSON.stringify(generatedJSON, null, 2) }}</pre>\n        <button @click=\"downloadJSON\">下载JSON</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, computed, onMounted } from \"vue\";\n\n// 扩展数据结构以支持创建\ninterface CourseData {\n  title: string;\n  chapters: Chapter[];\n}\n\ninterface Chapter {\n  name: string;\n  sections: Section[];\n}\n\ninterface Section {\n  name: string;\n  timepoint?: number; // 可选时间点\n  videoPath?: string | null; // 修改为 string | null 与 videoUrl 类型一致\n  codeFiles: CodeFile[];\n}\n\ninterface CodeFile {\n  filename: string;\n  file: File;\n  fileUrl: string;\n  inputpath?: string; // 可选输入文件路径\n}\n\n// 状态定义\nconst newCourse = ref<CourseData>({\n  title: \"\",\n  chapters: [],\n});\n\nconst newChapterName = ref(\"\");\nconst newSectionNames = ref<string[]>([]);\nconst videoUrl = ref<string | null>(null);\nconst videoRef = ref<HTMLVideoElement | null>(null);\nconst generatedJSON = ref<any>(null);\n\n// 处理视频上传\nconst handleVideoUpload = (e: Event) => {\n  const files = (e.target as HTMLInputElement).files;\n  if (!files || files.length === 0) return;\n\n  const file = files[0];\n  const url = URL.createObjectURL(file);\n  videoUrl.value = url;\n\n  // 设置所有章节的视频路径\n  newCourse.value.chapters.forEach((chapter) => {\n    chapter.sections.forEach((section) => {\n      section.videoPath = url;\n    });\n  });\n};\n\n// 添加章节\nconst addChapter = () => {\n  if (!newChapterName.value.trim()) return;\n\n  newCourse.value.chapters.push({\n    name: newChapterName.value,\n    sections: [],\n  });\n\n  newSectionNames.value.push(\"\");\n  newChapterName.value = \"\";\n};\n\n// 删除章节\nconst deleteChapter = (chapterIndex: number) => {\n  newCourse.value.chapters.splice(chapterIndex, 1);\n  newSectionNames.value.splice(chapterIndex, 1);\n};\n\n// 添加小节\nconst addSection = (chapterIndex: number) => {\n  if (!newSectionNames.value[chapterIndex].trim()) return;\n\n  newCourse.value.chapters[chapterIndex].sections.push({\n    name: newSectionNames.value[chapterIndex],\n    codeFiles: [],\n    videoPath: videoUrl.value, // 直接赋值，类型已匹配\n  });\n\n  newSectionNames.value[chapterIndex] = \"\";\n};\n\n// 删除小节\nconst deleteSection = (chapterIndex: number, sectionIndex: number) => {\n  newCourse.value.chapters[chapterIndex].sections.splice(sectionIndex, 1);\n};\n\n// 在当前视频时间点添加标记\nconst markTimepoint = (chapterIndex: number, sectionIndex: number) => {\n  if (!videoRef.value) return;\n\n  const timepoint = Math.floor(videoRef.value.currentTime);\n  newCourse.value.chapters[chapterIndex].sections[sectionIndex].timepoint =\n    timepoint;\n};\n\n// 处理代码文件上传\nconst handleCodeUpload = (\n  chapterIndex: number,\n  sectionIndex: number,\n  e: Event\n) => {\n  const files = (e.target as HTMLInputElement).files;\n  if (!files || files.length === 0) return;\n\n  const file = files[0];\n  const fileUrl = URL.createObjectURL(file);\n\n  newCourse.value.chapters[chapterIndex].sections[sectionIndex].codeFiles.push({\n    filename: file.name,\n    file,\n    fileUrl,\n  });\n};\n\n// 删除代码文件\nconst deleteCodeFile = (\n  chapterIndex: number,\n  sectionIndex: number,\n  fileIndex: number\n) => {\n  const file =\n    newCourse.value.chapters[chapterIndex].sections[sectionIndex].codeFiles[\n      fileIndex\n    ];\n  URL.revokeObjectURL(file.fileUrl); // 释放URL对象\n  newCourse.value.chapters[chapterIndex].sections[\n    sectionIndex\n  ].codeFiles.splice(fileIndex, 1);\n};\n\n// 生成JSON\nconst generateJSON = () => {\n  // 准备导出的JSON数据\n  const exportData: CourseData = {\n    title: newCourse.value.title,\n    chapters: newCourse.value.chapters.map((chapter, chapterIndex) => ({\n      name: chapter.name,\n      sections: chapter.sections.map((section, sectionIndex) => ({\n        name: section.name,\n        videoPath: section.videoPath || \"\",\n        codeFiles: section.codeFiles.map((file, fileIndex) => ({\n          // 包含所有必要的属性\n          ...file,\n          timepoint: section.timepoint || 0,\n          codepath: `/code/${file.filename}`,\n          inputpath: `/input/${file.filename.replace(\n            /\\.[^/.]+$/,\n            \"\"\n          )}_input.txt`,\n        })),\n      })),\n    })),\n  };\n\n  generatedJSON.value = exportData;\n};\n\n// 下载JSON文件\nconst downloadJSON = () => {\n  if (!generatedJSON.value) return;\n\n  const jsonStr = JSON.stringify(generatedJSON.value, null, 2);\n  const blob = new Blob([jsonStr], { type: \"application/json\" });\n\n  // 创建下载链接\n  const link = document.createElement(\"a\");\n  link.href = URL.createObjectURL(blob);\n  link.download = `${newCourse.value.title || \"course\"}.json`;\n\n  // 触发下载\n  document.body.appendChild(link);\n  link.click();\n\n  // 清理\n  document.body.removeChild(link);\n  URL.revokeObjectURL(link.href);\n};\n\n// 时间格式化函数\nconst formatTime = (timepoint: number) => {\n  const minutes = Math.floor(timepoint / 60);\n  const seconds = Math.floor(timepoint % 60);\n  return `${minutes.toString().padStart(2, \"0\")}:${seconds\n    .toString()\n    .padStart(2, \"0\")}`;\n};\n</script>\n\n<style scoped>\n.course-editor {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.form-section {\n  margin-bottom: 30px;\n  padding: 15px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\nbutton {\n  padding: 8px 15px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-right: 10px;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\nbutton.delete {\n  background-color: #f44336;\n}\n\nbutton.delete:hover {\n  background-color: #d32f2f;\n}\n\n.video-preview {\n  margin-top: 15px;\n}\n\n.chapter-item,\n.section-item {\n  margin-bottom: 20px;\n  padding: 10px;\n  border: 1px solid #eee;\n  border-radius: 4px;\n}\n\n.chapter-header,\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.code-files {\n  margin-top: 10px;\n  padding: 10px;\n  background-color: #f9f9f9;\n  border-radius: 4px;\n}\n\n.code-file-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 5px;\n}\n\n.json-preview {\n  margin-top: 15px;\n  padding: 15px;\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n</style>\n","import script from \"./CreateNewCourse.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CreateNewCourse.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./CreateNewCourse.vue?vue&type=style&index=0&id=1c8cf22e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1c8cf22e\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","style","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","key","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_defineComponent","__name","setup","__props","newCourse","ref","title","chapters","newChapterName","newSectionNames","videoUrl","videoRef","generatedJSON","handleVideoUpload","e","files","target","length","file","url","URL","createObjectURL","value","forEach","chapter","sections","section","videoPath","addChapter","trim","push","name","deleteChapter","chapterIndex","splice","addSection","codeFiles","deleteSection","sectionIndex","markTimepoint","timepoint","Math","floor","currentTime","handleCodeUpload","fileUrl","filename","deleteCodeFile","fileIndex","revokeObjectURL","generateJSON","exportData","map","codepath","inputpath","replace","downloadJSON","jsonStr","JSON","stringify","blob","Blob","type","link","document","createElement","href","download","body","appendChild","click","removeChild","formatTime","minutes","seconds","toString","padStart","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","_withDirectives","$event","placeholder","_vModelText","onChange","ref_key","controls","width","height","src","_createTextVNode","_createCommentVNode","onClick","_Fragment","_renderList","_toDisplayString","__exports__"],"sourceRoot":""}