"use strict";(self["webpackChunkwebide"]=self["webpackChunkwebide"]||[]).push([[7589],{47589:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});t(44114),t(18111),t(22489),t(20116),t(7588),t(61701);var a=t(56768),u=t(24232),n=t(45130),o=t(90144),c=t(54880),i=t(6109);const v={class:"box"},d={class:"left-content",title:"左"},r={class:"chapters-container"},s=["onClick"],p=["onClick"],k={key:0,class:"player-container"},h={class:"video-container",style:{width:"100%",height:"500px"}},f=["src"],y={class:"right-content",title:"右"},g={key:0},b={key:1},m={class:"coding_space"},K={id:"windowContent",ref:"windowContentRef"},w={id:"xuanxiangka"};var C=(0,a.pM)({__name:"LearningCourse",setup(e){const l=(0,o.KR)(null),t=(0,o.KR)(null),C=(0,o.KR)(null),R=(0,o.KR)(""),L=(0,o.KR)(""),_=(0,o.KR)([]),E=(0,o.KR)(null),F=(0,o.KR)(""),V=(0,o.KR)(""),X=(0,o.KR)(!1),$=async()=>{try{const e=await fetch("/course.json");if(!e.ok)throw new Error("Failed to fetch course data");t.value=await e.json(),R.value=t.value?.title||"C++学习"}catch(e){console.error("Error fetching course data:",e)}},x=(e,t)=>{C.value=e,L.value=t,E.value=null,F.value="",V.value="",l.value&&(l.value.currentTime=0,l.value.src=e.videoPath,l.value.load())},I=e=>{const l=_.value.indexOf(e);l>-1?_.value.splice(l,1):_.value.push(e)},U=e=>_.value.includes(e),A=async e=>{try{const l=await fetch(e);if(!l.ok)throw new Error(`Failed to fetch file: ${e}`);return await l.text()}catch(l){return console.error("Error fetching file content:",l),"文件加载失败"}},D=async()=>{if(!l.value||!C.value)return;const e=l.value.currentTime,t=C.value.codeFiles;let a=-1;for(let l=0;l<t.length;l++){if(!(e>=t[l].timepoint))break;a=l}if(-1!==a&&t[a]!==E.value){E.value=t[a],X.value=!0;const[e,l]=await Promise.all([A(E.value.codepath),A(E.value.inputpath)]);F.value=e,V.value=l,X.value=!1,O.value[0].codingcontent=`${F.value}`,O.value[0].inputcontent=`${V.value}`,!0!==E.value.isloading&&(P(),E.value.isloading=!0)}},P=()=>{S.value=++B.value,O.value.push({title:`videocode${S.value}`,key:S.value,codingcontent:`${F.value}`,inputcontent:`${V.value}`,outputcontent:"",fileID:""})};(0,a.sV)((()=>{$()})),(0,a.wB)(C,(e=>{e&&l.value&&l.value.play().catch((e=>{console.error("Error playing video:",e)}))}));const T=(0,o.KR)(""),W=(0,o.KR)(0),j=()=>{W.value=S.value;const e=(0,o.KR)({code:O.value[S.value].codingcontent,input:O.value[S.value].inputcontent});console.log(e),console.log(W.value),console.log(S.value),(0,i.v)(JSON.stringify(e.value)).then((e=>{T.value=e.data.output,O.value[W.value].outputcontent=T.value,console.log(T.value)})).catch((e=>{console.log(e)}))};const O=(0,o.KR)(new Array(1).fill(null).map(((e,l)=>{const t=l,a=(0,o.KR)("write code here."),u=(0,o.KR)(""),n=(0,o.KR)("");return{title:`code ${t}`,key:t,codingcontent:a,inputcontent:u,outputcontent:n,fileID:"-1"}}))),S=(0,o.KR)(O.value[0].key),B=(0,o.KR)(0),G=()=>{S.value=++B.value,O.value.push({title:`code${S.value}`,key:S.value,codingcontent:`write code here. ${S.value}`,inputcontent:"",outputcontent:"",fileID:"-1"})},J=e=>{let l=0;O.value.forEach(((t,a)=>{t.key===e&&(l=a-1)})),O.value=O.value.filter((l=>l.key!==e)),O.value.length&&S.value===e&&(S.value=l>=0?O.value[l].key:O.value[0].key)},M=e=>{J(e)};return(e,o)=>{const i=(0,a.g2)("a-button"),L=(0,a.g2)("a-row"),_=(0,a.g2)("a-col"),F=(0,a.g2)("a-tab-pane"),V=(0,a.g2)("a-tabs");return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",d,[(0,a.Lk)("h1",null,(0,u.v_)(R.value),1),(0,a.Lk)("h2",null,(0,u.v_)(C.value?.name||"请选择章节"),1),(0,a.Lk)("div",r,[o[1]||(o[1]=(0,a.Lk)("h2",null,"课程章节",-1)),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value?.chapters||[],((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:l},[(0,a.Lk)("div",{onClick:e=>I(l)},(0,u.v_)(e.name),9,s),(0,a.bo)((0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sections,((l,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("button",{onClick:t=>x(l,e.name)},(0,u.v_)(l.name),9,p)])))),128))],512),[[n.aG,U(l)]])])))),128))])]),C.value?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",h,[(0,a.Lk)("video",{ref_key:"videoRef",ref:l,controls:"",onTimeupdate:D,style:{width:"100%",height:"auto"}},[(0,a.Lk)("source",{src:C.value?.videoPath,type:"video/mp4"},null,8,f),o[2]||(o[2]=(0,a.eW)(" 您的浏览器不支持视频播放 "))],544)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",y,[(0,a.Lk)("div",null,[E.value?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.bF)(i)])):((0,a.uX)(),(0,a.CE)("div",g,"等待视频播放...")),(0,a.Lk)("div",m,[(0,a.Lk)("div",K,[(0,a.Lk)("div",null,[(0,a.bF)(i,{onClick:G},{default:(0,a.k6)((()=>o[3]||(o[3]=[(0,a.eW)("ADD")]))),_:1})]),(0,a.Lk)("div",w,[(0,a.bF)(V,{activeKey:S.value,"onUpdate:activeKey":o[0]||(o[0]=e=>S.value=e),"hide-add":"",type:"editable-card",onEdit:M},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(O.value,(e=>((0,a.uX)(),(0,a.Wv)(F,{key:e.key,tab:e.title,closable:e.closable},{default:(0,a.k6)((()=>[(0,a.bF)(L,{style:{height:"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c.A,{title:"Code Space",compile:j,modelValue:e.codingcontent,"onUpdate:modelValue":l=>e.codingcontent=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.bF)(_,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(c.A,{title:"input",modelValue:e.inputcontent,"onUpdate:modelValue":l=>e.inputcontent=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.bF)(_,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(c.A,{title:"output",modelValue:e.outputcontent,"onUpdate:modelValue":l=>e.outputcontent=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["tab","closable"])))),128))])),_:1},8,["activeKey"])])],512)])])])])}}}),R=t(71241);const L=(0,R.A)(C,[["__scopeId","data-v-70b39878"]]);var _=L}}]);
//# sourceMappingURL=7589.57b2744b.js.map